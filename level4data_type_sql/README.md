# Типы данных в SQL

Всего типы данных можно разбить на 5 групп:

* Числовые типы
* Строковые типы
* Типы для хранения даты и времени
* Объекты: обычно представленные как набор байт
* Транспортные: JSON и XML 

## Числовые типы в SQL
В языке SQL числовые типы делятся на три группы:

* Целые типы
* Числа с фиксированной запятой (фиксированное число знаков после запятой)
* Числа с плавающей запятой

| #	 | Имя типа	   | Длина в байтах	 | Аналог из Java	 | Минимальное значение	 | Максимальное значение |
|:---|:------------|:----------------|:----------------|:----------------------|:----------------------|
| 1  | 	TINYINT	   | 1	              | byte	           | -128	                 | 127                   |
 | 2  | 	SMALLINT	  | 2	              | short	          | -32,768	32,767        |
 | 3  | 	MEDIUMINT	|                 | 3		             | -8,388,608	     | 8,388,607             |
 | 4  | 	INT	       | 4	              | int	            | -2,147,483,648	       | 2,147,483,647         |
 | 5  | 	BIGINT	    | 8	              | long	           | -2^63	                | 2^63-1                |

Далее идут типы с плавающей запятой, как и в Java, их всего два:

| #	 | Имя типа	 | Длина в байтах	 | Аналог из Java	 | Минимальное значение | 	Максимальное значение |
|:---|:----------|:----------------|:----------------|:---------------------|:-----------------------|
| 1	 | FLOAT	    | 4	              | float	          | -3.40E+38	           | +1.18E+38              |
| 2	 | DOUBLE	   | 8	              | doble	          | -1.79E+308	          | +1.79E+308             |

в SQL есть еще один специальный тип – вещественной число с фиксированной запятой. Называется оно DECIMAL.

Обычно этот тип используется для хранения сумм денег. Когда пишется название этого типа, \
то после него обычно указывается, сколько у числа десятичных знаков до запятой и после запятой. Общий формат выглядит так:

<span class = "orange">DECIMAL(всего_знаков, после_запятой)</span>

И небольшой пример:

<span class = "orange">  salary DECIMAL(5,2) </span>

## Временные типы в SQL

В SQL также есть специальные типы для хранения даты и времени. Всего таких типов пять:

| #	 | Имя типа	  | Аналог из Java  DateTime API	 | Пример	                | Минимальное значение	         | Максимальное значение        |
|:---|:-----------|:------------------------------|:-----------------------|:------------------------------|:-----------------------------|
| 1	 | DATE	      | LocalDate	                    | ‘2022-06-30’	          | ‘1000-01-01’	                 | ‘9999-12-31’                 |                       |
| 2	 | TIME	      | LocalTime	                    | 'hh:mm:ss[.fraction]'	 | '-838:59:59.000000'	          | '838:59:59.000000'           |                       |
| 3	 | DATETIME	  | LocalDateTime                 | 		                     | ‘1000-01-01 00:00:00.000000’	 | '9999-12-31 23:59:59.999999' |                       |
| 4	 | TIMESTAMP	 | Date                          | 		                     | '1970-01-01 00:00:01.000000'	 | '2038-01-19 03:14:07.999999' |                       |
| 5	 | YEAR       | 	                             | 	                      | 	                             | 1901	                        | 2155                  |


## Хранение объектов в SQL
Для хранения объектов или текстов большой длины есть специальные типы. Особо их разбирать не будем, но я все же их перечислю:

|#	|Имя типа	|Пояснение|
|:----|:----|:-----|
|1	|TEXT	|Используется для хранения текстов большой длины. При сравнении и сортировки по этому полю используется только первые 100 символов.|
|2	|BLOB	|Название расшифровывается как Byte Large Object. Хранится в виде просто набора байт. Можно использовать, чтобы, например, хранить в базе данных картинки.|
|3	|CLOB	|Название расшифровывается как Char Large Object. Используется для хранения текстов большой длины.|
|4	|ENUM	|Позволяет задать фиксированный набор значений и хранить в качестве значения одно из них.|
|5	|SET	|Позволяет задать фиксированный набор значений и хранить в качестве значения любое их подмножество. Обычно хранит их как бинарную маску.|

# Числовые функции
Все числовые функции в MySQL можно условно разделить на 5 групп:

* Арифметически операции
* Битовые операции
* Функции округления
* Алгебраические функции
* Тригонометрические функции

## Арифметические операции


|#|		Пример|
|:-----|:----|
|1|	+, -, *, /	|2+2*2	|Сложение, вычитание, умножение, деление (не нацело!)|
|2|	%	|13 % 5	|Остаток от деления|
|3|	MOD	|13 MOD 5	|Остаток от деления|
|4|	DIV	|13 DIV 5	|Деление нацело|

## Функции округления

|#|		Пример|	Примечание|
|:-----|:-----|:-----|
|1|	CEIL(), CEILING()|	CEIL (5.1) = 6	|Округляет вещественное число вверх|
|2|	FLOOR()|	FLOOR (5.9) = 5	|Округляет вещественное число вниз|
|3|	ROUND()|	ROUND(4.1) = 4	|Округляет вещественное число до ближайшего целого|
|4|	TRUNCATE()|	TRUNCATE(4.123, 2) = 4.12	|Обрезает число до N знаков после запятой|
|5|	RAND()|	0.61914388706828	|Возвращает случайное вещественное число в диапазоне от 0 до 1|
|6|	RAND(N)|	0.93845168309142	|Возвращает случайное вещественное число в диапазоне от 0 до 1. N используется как seed value|

# Функции работы с датой

## Список функций для работы с датой и временем
Дата и время – это одни из самых распространенных типов данных, которые хранятся в Базах Данных. Именно поэтому список функций для работы с ними очень большой. Вот самые популярные из них:

| #	  | Функция	             | Описание                                                  |
|-----|----------------------|-----------------------------------------------------------|
| 1	  | CURDATE()	           | Возвращает текущую дату                                   |
| 2	  | CURTIME()	           | Возвращает текущее время                                  |
| 3	  | NOW(), LOCALTIME()	  | Возвращает текущую дату и текущее время                   |
| 4	  | YEAR()	              | Возвращает год от даты                                    |
| 5	  | MONTH()	             | Возвращает месяц из даты                                  |
| 6	  | DAY(), DAYOFMONTH()	 | Возвращает день из даты                                   |
| 7	  | HOUR()	              | Возвращает только часы из времени                         |
| 8	  | MINUTE()	            | Возвращает минуты от времени                              |
| 9	  | SECOND()             | 	Возвращает секунды от времени                            |
| 10	 | DAYNAME()            | 	Возвращает название дня недели: Monday, ...              |
 | 11	 | MONTHNAME()	         | Возвращает название месяца: Январь, …                     |
| 12	 | WEEK()               | 	Возвращает неделю из даты                                |
 | 13	 | WEEKDAY()	           | Возвращает номер дня недели: Понедельник – 0, Вторник – 1 |
 | 14	 | WEEKOFYEAR()	        | Возвращает номер недели в году                            |
 | 15	 | DAYOFWEEK()	         | Возвращает имя дня недели                                 |
 | 16	 | DAYOFYEAR()          | 	Возвращает день года: 1-366                              |
 | 17	 | DATE()	              | Возвращает только дату от объекта «дата и время»          |
 | 18	 | ADDDATE()	           | Добавляет дни к дате                                      |
 | 19	 | SUBDATE()            | 	Вычитает дни из даты                                     |
| 20	 | ADDTIME()	           | Добавляет время ко времени                                |                              
| 21	 | SUBTIME()	           | Вычитает время из времени                                 |


## Список строковых функций
Больше функций, чем у даты и времени, — только у типа String. Который в SQL задается типами CHAR(n) и VARCHAR(n). Вспомним самые популярные из них:

| |Функция| 	Описание                                           |
|:----|:----|:----------------------------------------------------|
|1	|LENGTH(str)	| Возвращает длину переданной строки в байтах         |
|2	|CHAR_LENGTH(str)	| Возвращает длину переданной строки в char’ах        |
|3	|LOCATE(substr,str),	| Ищет подстроку в строке аналогично методу indexOf() |
|4	|LOCATE(substr,str,pos)	| Ищет подстроку в строке, начиная с символа pos      |
|5	|CONCAT(str1,str2,...)	| Склеивает несколько строк                           |
|6	|SUBSTR(), SUBSTRING()	| Возвращает подстроку, заданную диапазоном символов  |
|7	|LOWER(str)	| Преобразует строку в нижний регистр                 |
|8	|UPPER(str)	| Преобразует строку в верхний регистр                |
|9	|REPLACE()	| Заменяет подстроку в строке                         |
|10	|MATCH()	| Проверяет совпадение строки заданному шаблону       |
|11	|TRIM(str)| 	Обрезает пустые символы в начале и в конце строки  |
|12	|LTRIM(str)| 	Обрезает пустые символы в начале строки            |
|13	|RTRIM(str)	| Обрезает пустые символы в конце строки              |
|14	|TO_BASE64(str)	| Преобразует строку в Base64                         |
|15	|FROM_BASE64(str)| 	Преобразует строку из Base64                       |


<style>
span.orange{
padding: 5px;
border:1px solid orange;
color: orange
}
span.red{
color:red;
}
span.green{
color:green;
font-weight: bold;
}
</style>